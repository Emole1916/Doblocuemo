<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>2015 Doblo 1.6 Multijet ‚Äì 3D Driving Game</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:Arial; }
#hud {
    position:fixed;
    top:10px; left:10px;
    color:#0f0;
    background:rgba(0,0,0,0.7);
    padding:12px;
    border-radius:10px;
    z-index:10;
    font-size:14px;
}
#hud span { color:white; }
</style>
</head>
<body>

<div id="hud">
üöê <b>2015 DOBLO 1.6 MJET</b><br>
Hƒ±z: <span id="speed">0</span> km/h<br>
Vites: <span id="gear">N</span><br>
W/S: Gaz/Fren<br>
A/D: Direksiyon<br>
Q/E: Vites ‚Üì‚Üë
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
// =====================
// SAHNE & RENDER
// =====================
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000, 30, 200);

const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,5,-10);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setClearColor(0x101010);
document.body.appendChild(renderer.domElement);

// =====================
// I≈ûIKLAR
// =====================
scene.add(new THREE.AmbientLight(0xffffff, 0.4));
const sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(5,15,5);
scene.add(sun);

// =====================
// YOL & ≈ûEHƒ∞R
// =====================
const road = new THREE.Mesh(
    new THREE.PlaneGeometry(2000, 30),
    new THREE.MeshStandardMaterial({color:0x333333})
);
road.rotation.x = -Math.PI/2;
scene.add(road);

// Binalar
for(let i=0;i<80;i++){
    const b = new THREE.Mesh(
        new THREE.BoxGeometry(5, Math.random()*20+5, 5),
        new THREE.MeshStandardMaterial({color:0x444444})
    );
    b.position.set(
        (Math.random()>0.5?1:-1)*(10+Math.random()*20),
        b.geometry.parameters.height/2,
        Math.random()*800-200
    );
    scene.add(b);
}

// =====================
// DOBLO MODEL
// =====================
const doblo = new THREE.Group();

// G√∂vde
const body = new THREE.Mesh(
    new THREE.BoxGeometry(2.6,1.4,4.5),
    new THREE.MeshStandardMaterial({color:0xffffff})
);
body.position.y = 1.2;
doblo.add(body);

// Kabin
const cabin = new THREE.Mesh(
    new THREE.BoxGeometry(2.4,1.2,2.2),
    new THREE.MeshStandardMaterial({color:0xf0f0f0})
);
cabin.position.set(0,2.2,-0.4);
doblo.add(cabin);

// Teker
function wheel(x,z){
    const w = new THREE.Mesh(
        new THREE.CylinderGeometry(0.45,0.45,0.4,24),
        new THREE.MeshStandardMaterial({color:0x111111})
    );
    w.rotation.z = Math.PI/2;
    w.position.set(x,0.45,z);
    doblo.add(w);
}
wheel(-1.3,1.7); wheel(1.3,1.7);
wheel(-1.3,-1.7); wheel(1.3,-1.7);

// Farlar
const farL = new THREE.SpotLight(0xffffff,2,20,0.4);
farL.position.set(-0.8,1.3,2.4);
farL.target.position.z = 20;
doblo.add(farL); doblo.add(farL.target);

const farR = farL.clone();
farR.position.x = 0.8;
doblo.add(farR);

// Stoplar
const stopL = new THREE.PointLight(0xff0000,0,6);
stopL.position.set(-0.8,1.2,-2.4);
doblo.add(stopL);

const stopR = stopL.clone();
stopR.position.x = 0.8;
doblo.add(stopR);

scene.add(doblo);

// =====================
// TRAFƒ∞K ARA√áLARI
// =====================
const traffic = [];
function spawnTraffic(){
    const t = new THREE.Mesh(
        new THREE.BoxGeometry(2,1.2,4),
        new THREE.MeshStandardMaterial({color:0x0077ff})
    );
    t.position.set(Math.random()>0.5?4:-4,1, doblo.position.z+100);
    scene.add(t);
    traffic.push(t);
}
setInterval(spawnTraffic, 2000);

// =====================
// POLƒ∞S
// =====================
const police = new THREE.Mesh(
    new THREE.BoxGeometry(2.2,1.2,4),
    new THREE.MeshStandardMaterial({color:0x0000ff})
);
police.position.set(0,1,-30);
scene.add(police);

// =====================
// Fƒ∞Zƒ∞K & KONTROLLER
// =====================
let speed = 0;
let steering = 0;
let gear = 0;
const gears = [0, 0.6, 1, 1.4, 1.8, 2.2];

const keys = {};
onkeydown = e => keys[e.key.toLowerCase()] = true;
onkeyup   = e => keys[e.key.toLowerCase()] = false;

// =====================
// OYUN D√ñNG√úS√ú
// =====================
function animate(){
    requestAnimationFrame(animate);

    // Vites
    if(keys["e"] && gear<5){ gear++; keys["e"]=false; }
    if(keys["q"] && gear>0){ gear--; keys["q"]=false; }

    // Gaz
    if(keys["w"] && gear>0){
        speed += 0.02 * gears[gear];
        farL.intensity = farR.intensity = 2;
    } else speed *= 0.98;

    // Fren
    if(keys["s"]){
        speed *= 0.9;
        stopL.intensity = stopR.intensity = 2;
    } else stopL.intensity = stopR.intensity = 0;

    // Direksiyon
    if(keys["a"]) steering += 0.002;
    if(keys["d"]) steering -= 0.002;
    steering *= 0.9;

    // Hareket
    doblo.rotation.y += steering * speed;
    doblo.position.x += Math.sin(doblo.rotation.y) * speed;
    doblo.position.z += Math.cos(doblo.rotation.y) * speed;

    // Kamera
    camera.position.lerp(
        new THREE.Vector3(
            doblo.position.x,
            doblo.position.y+4,
            doblo.position.z-10
        ), 0.1
    );
    camera.lookAt(doblo.position);

    // Trafik hareket
    traffic.forEach(t => {
        t.position.z -= speed*0.8;
    });

    // Polis takip
    police.position.z += (doblo.position.z - police.position.z) * 0.01;

    document.getElementById("speed").innerText = Math.abs(speed*60).toFixed(0);
    document.getElementById("gear").innerText = gear===0?"N":gear;

    renderer.render(scene, camera);
}
animate();

onresize = ()=>{
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(innerWidth, innerHeight);
};
</script>

</body>
</html>
